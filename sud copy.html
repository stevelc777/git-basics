<!DOCTYPE html>
<html>
	<head>
	<style>
	td{
	font-family:courier;
	font-size:12px;
	text-align:center;
	}
	.td1{
	font-family:courier;
	font-size:45px;
	text-align:center;
	}
	</style>
	<script type="text/javascript">
		var arrRow=new Array();
		var arrCol=new Array();
		var area;
		var dispRow;
		var dispCol;
		var dispArea;
		
		function clbutt(){
			document.getElementById("sp3").style.visibility="hidden";
		}
		
		function omo(i){
			if (document.getElementById(i).innerHTML == "&nbsp;"){
				hiLite(i);
				popBoxes();
				doLilNums(i);
			}
		}
			
		function doLilNums(i){
			var lilNums = "";
			var lilNumCnt = 0;
			if (dispRow.indexOf("1")==-1&&dispCol.indexOf("1")==-1&&dispArea.indexOf("1")==-1){
				lilNums = lilNums+"1";
				lilNumCnt++;
			}
			if (dispRow.indexOf("2")==-1&&dispCol.indexOf("2")==-1&&dispArea.indexOf("2")==-1){
				lilNums = lilNums+"2";
				lilNumCnt++;
			}
			if (dispRow.indexOf("3")==-1&&dispCol.indexOf("3")==-1&&dispArea.indexOf("3")==-1){
				lilNums = lilNums+"3";
				lilNumCnt++;
			}
			if (dispRow.indexOf("4")==-1&&dispCol.indexOf("4")==-1&&dispArea.indexOf("4")==-1){
				lilNums = lilNums+"4";
				lilNumCnt++;
			}
			if (dispRow.indexOf("5")==-1&&dispCol.indexOf("5")==-1&&dispArea.indexOf("5")==-1){
				lilNums = lilNums+"5";
				lilNumCnt++;
			}
			if (dispRow.indexOf("6")==-1&&dispCol.indexOf("6")==-1&&dispArea.indexOf("6")==-1){
				lilNums = lilNums+"6";
				lilNumCnt++;
			}
			if (dispRow.indexOf("7")==-1&&dispCol.indexOf("7")==-1&&dispArea.indexOf("7")==-1){
				lilNums = lilNums+"7";
				lilNumCnt++;
			}
			if (dispRow.indexOf("8")==-1&&dispCol.indexOf("8")==-1&&dispArea.indexOf("8")==-1){
				lilNums = lilNums+"8";
				lilNumCnt++;
			}
			if (dispRow.indexOf("9")==-1&&dispCol.indexOf("9")==-1&&dispArea.indexOf("9")==-1){
				lilNums = lilNums+"9";
				lilNumCnt++;
			}
			document.getElementById("txt4").innerHTML=lilNums;
			
			if (lilNumCnt==1){
				document.getElementById(i).style.background = "orange";
			}
			if (lilNumCnt==2){
				process2Nums(i,lilNums);
			}
		}

		function hiLite(i){
			var row=parseInt((i-1)/9)+1;
			var col=((i-1)%9)+1;

			for (x=1;x<10;x++){
				document.getElementById(x+(row-1)*9).style.background="lightgreen";
				arrRow[x]=document.getElementById(x+(row-1)*9).innerHTML;
			}

			for (y=1;y<10;y++){
				document.getElementById(col+(y-1)*9).style.background="lightgreen";
				arrCol[y]=document.getElementById(col+(y-1)*9).innerHTML;
			}

			if (col<4){
				if (row<4){
					area=1;
				}else if(row<7){
					area=28;
				}else{
					area=55;
				}
			}else if(col<7){
				if (row<4){
					area=4;
				}else if(row<7){
					area=31;
				}else{
					area=58;
				}
			}else{
				if (row<4){
					area=7;
				}else if(row<7){
					area=34;
				}else{
					area=61;
				}
			}

			document.getElementById(area).style.background="lightgreen";
			document.getElementById(area+1).style.background="lightgreen";
			document.getElementById(area+2).style.background="lightgreen";
			document.getElementById(area+9).style.background="lightgreen";
			document.getElementById(area+10).style.background="lightgreen";
			document.getElementById(area+11).style.background="lightgreen";
			document.getElementById(area+18).style.background="lightgreen";
			document.getElementById(area+19).style.background="lightgreen";
			document.getElementById(area+20).style.background="lightgreen";
		}

		function popBoxes(){
			// populate text boxes at bottom
			dispRow=arrRow[1]+arrRow[2]+arrRow[3]+arrRow[4]+arrRow[5]+arrRow[6]+arrRow[7]+arrRow[8]+arrRow[9];
			document.getElementById("txt1").innerHTML=dispRow;
			
			dispCol=arrCol[1]+arrCol[2]+arrCol[3]+arrCol[4]+arrCol[5]+arrCol[6]+arrCol[7]+arrCol[8]+arrCol[9];
			document.getElementById("txt2").innerHTML=dispCol;
			
			dispArea = document.getElementById(area).innerHTML + document.getElementById(area+1).innerHTML + document.getElementById(area+2).innerHTML + document.getElementById(area+9).innerHTML + document.getElementById(area+10).innerHTML + document.getElementById(area+11).innerHTML + document.getElementById(area+18).innerHTML + document.getElementById(area+19).innerHTML + document.getElementById(area+20).innerHTML;
			document.getElementById("txt3").innerHTML=dispArea;

			var gotOkRow = getOk(dispRow);
			//alert(gotOkRow);
			document.getElementById("txt1").innerHTML=gotOkRow;
			var gotOkCol = getOk(dispCol);
			//alert(gotOkCol);
			document.getElementById("txt2").innerHTML=gotOkCol;
			var gotOkArea = getOk(dispArea);
			//alert(gotOkArea);
			document.getElementById("txt3").innerHTML=gotOkArea;
		}

		function process1Num(i,str){
			document.getElementById(i).style.background = "orange";
		}

		function process2Nums(i,str){
			document.getElementById(i).style.background = "violet";
		}

		function getOk(str){
			var ok="";
			if (str.indexOf("1")==-1){
				ok = ok+"1";
			}
			if (str.indexOf("2")==-1){
				ok = ok+"2";
			}
			if (str.indexOf("3")==-1){
				ok = ok+"3";
			}
			if (str.indexOf("4")==-1){
				ok = ok+"4";
			}
			if (str.indexOf("5")==-1){
				ok = ok+"5";
			}
			if (str.indexOf("6")==-1){
				ok = ok+"6";
			}
			if (str.indexOf("7")==-1){
				ok = ok+"7";
			}
			if (str.indexOf("8")==-1){
				ok = ok+"8";
			}
			if (str.indexOf("9")==-1){
				ok = ok+"9";
			}
			return ok;
		}
		
		function omout(i){
			var row=parseInt((i-1)/9)+1;
			var col=((i-1)%9)+1;
			for (x=(row-1)*9+1;x<(row-1)*9+10;x++){
				document.getElementById(x).style.background="white";
			}
			for (y=col;y<=col+72;y=y+9){
				document.getElementById(y).style.background="white";
			}
			document.getElementById(area).style.background="white";
			document.getElementById(area+1).style.background="white";
			document.getElementById(area+2).style.background="white";
			document.getElementById(area+9).style.background="white";
			document.getElementById(area+10).style.background="white";
			document.getElementById(area+11).style.background="white";
			document.getElementById(area+18).style.background="white";
			document.getElementById(area+19).style.background="white";
			document.getElementById(area+20).style.background="white";

			document.getElementById("txt1").innerHTML="&nbsp;";
			document.getElementById("txt2").innerHTML="&nbsp;";
			document.getElementById("txt3").innerHTML="&nbsp;";
			document.getElementById("txt4").innerHTML="&nbsp;";
		}
		function oc(i){
			if (document.getElementById("txt4").innerHTML.length==1){
				document.getElementById(i).innerHTML = document.getElementById("txt4").innerHTML;
				document.getElementById(i).style.color = "blue";
			}
		}
		function init(){
			for (t=1;t<4;t++){
				var tr1 = document.createElement("tr");
				for (u=1;u<4;u++){
					var td1 = document.createElement("td");
					var att = document.createAttribute("id");
					att.value="maintd"+u;
					td1.setAttributeNode(att);
					var tbl = document.createElement("table");
					var att = document.createAttribute("border");
					att.value="1";
					tbl.setAttributeNode(att);
					var att = document.createAttribute("width");
					att.value="100%";
					tbl.setAttributeNode(att);
					for (v=1;v<4;v++){
						var tr2 = document.createElement("tr");
						for (w=1;w<4;w++){
							var td2 = document.createElement("td");
							var att = document.createAttribute("id");
							att.value=((u-1)*3+w+(v-1)*9)+(t-1)*27;
							td2.setAttributeNode(att);
							var att = document.createAttribute("onmouseover");
							att.value="omo(this.id);";
							td2.setAttributeNode(att);
							var att = document.createAttribute("onmouseout");
							att.value="omout(this.id);";
							td2.setAttributeNode(att);
							var att = document.createAttribute("onclick");
							att.value="oc(this.id);";
							td2.setAttributeNode(att);
							var att = document.createAttribute("style");
							att.value="font-size:40px;";
							td2.setAttributeNode(att);
							
							var tbl2 = document.createElement("table");
							var att = document.createAttribute("border");
							att.value="0";
							tbl2.setAttributeNode(att);
							var att = document.createAttribute("width");
							att.value="100%";
							tbl2.setAttributeNode(att);
							for (x=1;x<4;x++){	
								var tr3 = document.createElement("tr");
								for (y=1;y<4;y++){
									var td3 = document.createElement("td");
									var att = document.createAttribute("id");
									att.value="t"+(((((x-1)*3+y+(w-1)*9)+(v-1)*27)+(u-1)*81)+(t-1)*243) ;
									td3.setAttributeNode(att);
									var att = document.createAttribute("style");
									att.value="font-size:11px;";
									td3.setAttributeNode(att);
									
									var tbl3 = document.createElement("table");
									var att = document.createAttribute("border");
									att.value="1";
									tbl3.setAttributeNode(att);
									var att = document.createAttribute("width");
									att.value="33%";
									tbl3.setAttributeNode(att);
									for (z=1;z<4;z++){	
										var tr4 = document.createElement("tr");
										for (zz=1;zz<4;zz++){
											var td4 = document.createElement("td");
											var att = document.createAttribute("id");
											att.value="ln"+zz;
											td4.setAttributeNode(att);
											td4.innerHTML = "M";
											var att = document.createAttribute("style");
											att.value="font-size:8px;";
											td4.setAttributeNode(att);
											tr4.appendChild(td4);
										}
										tbl3.appendChild(tr4);
									}
									td3.appendChild(tbl3);
									tr3.appendChild(td3);	
								}
								tbl2.appendChild(tr3);
								td2.appendChild(tbl2);
								td2.innerHTML="&nbsp;";
							}
							tr2.appendChild(td2);
						}
						tbl.appendChild(tr2);
					}
					td1.appendChild(tbl);
					tr1.appendChild(td1);
				}
				document.getElementById("maintbl").appendChild(tr1);				
			}
			document.getElementById("3").innerHTML="5";
			document.getElementById("12").innerHTML="3";
			document.getElementById("15").innerHTML="1";
			document.getElementById("18").innerHTML="9";
			document.getElementById("21").innerHTML="8";
			document.getElementById("20").innerHTML="1";
			document.getElementById("24").innerHTML="4";
			document.getElementById("26").innerHTML="2";
			document.getElementById("27").innerHTML="6";
			document.getElementById("28").innerHTML="3";
			document.getElementById("29").innerHTML="2";
			//document.getElementById("31").innerHTML="8";
			document.getElementById("32").innerHTML="9";
			document.getElementById("33").innerHTML="5";
			document.getElementById("34").innerHTML="6";
			document.getElementById("37").innerHTML="5";
			document.getElementById("40").innerHTML="1";
			document.getElementById("41").innerHTML="7";
			document.getElementById("42").innerHTML="2";
			document.getElementById("45").innerHTML="3";
			document.getElementById("48").innerHTML="1";
			document.getElementById("50").innerHTML="6";
			document.getElementById("51").innerHTML="3";
			document.getElementById("54").innerHTML="2";
			document.getElementById("55").innerHTML="7";
			document.getElementById("56").innerHTML="4";
			document.getElementById("58").innerHTML="3";
			document.getElementById("62").innerHTML="9";
			document.getElementById("62").innerHTML="9";
			document.getElementById("63").innerHTML="5";
			document.getElementById("64").innerHTML="1";
			document.getElementById("65").innerHTML="3";
			document.getElementById("67").innerHTML="5";
			document.getElementById("70").innerHTML="7";
			document.getElementById("71").innerHTML="6";
			document.getElementById("74").innerHTML="5";
			document.getElementById("79").innerHTML="2";
			document.getElementById("80").innerHTML="3";
		}
	
		
		
	</script>
	</head>
	<body onload="init();">
		<table id="maintbl" border="0" width="35%">
		</table>	
		<div id="txt1" style="position:absolute;bottom:17%;border:1px solid red;">&nbsp;</div>
		<div id="txt2" style="position:absolute;bottom:13%;border:1px solid red;">&nbsp;</div>
		<div id="txt3" style="position:absolute;bottom:9%;border:1px solid red;">&nbsp;</div>
		<div id="txt4" style="position:absolute;bottom:5%;border:1px solid red;">&nbsp;</div>

	</body>
</html>
